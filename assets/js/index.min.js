$(document).ready(function(){var t,o,s,n,r,c,i=$(".g-nav");$("#menu-toggle").on("click",function(e){i.slideToggle(200),$(document).on("click",function(){i.slideUp(200)}),e.stopPropagation()}),i.on("click",function(e){e.stopPropagation()}),695<$(window).width()&&(t=$(".g-header"),o=t.outerHeight(),s=$(".g-logo"),n=i.find("a"),r=$(".g-banner").attr("data-theme"),c=$(document).scrollTop(),$(document).scroll(function(){var e=$(this).scrollTop(),a="nav-"+r;o<e?(3*o<e&&t.addClass("headerUp"),t.addClass("header1"),t.removeClass("header2"),s.css({background:"url(/assets/icons/logo_"+r+".svg) no-repeat center","background-size":"100% 100%"}),n.css("color","#666"),i.addClass(a)):(t.removeClass("headerUp"),t.addClass("header2"),t.removeClass("header1"),s.css({background:"url(/assets/icons/logo.svg) no-repeat center","background-size":"100% 100%"}),n.css("color","#fff"),i.removeClass(a)),e<c?t.addClass("headerDown"):t.removeClass("headerDown"),c=e})),$(".read-next-item section").each(function(){var e=$(this).height(),a=$(".read-next-item").height();$(this).css("margin-top",(a-e)/4+"px"),$(this).fadeIn()}),$(".read-next-item img").each(function(){var e,a,t,o,s,n;e=$(this),a=$(".read-next-item"),t=e.width(),o=a.width(),s=e.height(),n=a.height(),s<n?(e.css({width:"auto",height:"100%"}),t=e.width(),o=a.width(),e.css("margin-left","-"+(t-o)/2+"px")):e.css("margin-top",(n-s)/2+"px"),e.fadeIn()});for(var e=parseInt($("#total_pages").val()),a=parseInt($("#current_pages").val()),l=$("#base_url").val(),h="",d=a-3;d<a;d++)0<d&&1!==d?h+='<a href="'+l+"page"+d+'" class="page-link page-num">'+d+"</a>":1===d&&(h+='<a href="'+l+'" class="page-link page-num">'+d+"</a>");h+='<span class="page-link page-num active">'+a+"</span>";for(var p=a+1;p<=a+3;p++)p<=e&&(h+='<a href="'+l+"page"+p+'" class="page-link page-num">'+p+"</a>");function u(){var t,o,s,e=$("#search_input"),a=$(".search_result"),n=$(".search-card").is("form");function r(e){e.preventDefault(),["127.0.0.1","localhost"].includes(location.hostname)?alert("本地网站不支持全文搜索！"):window.open("https://www.bing.com/search?q=site:"+location.hostname+" "+$("#search_input").val(),"_blank")}e.focus(function(){$(".icon-search").css("color","#3199DB"),a.show()}),e.keyup((t=this.autoComplete,o=o||120,function(){var e=this,a=arguments;clearTimeout(s),s=setTimeout(function(){t.apply(e,a)},o)})),n?((e=function(e){for(var a=window.location.search.substring(1).split("&"),t=0;t<a.length;t++){var o=a[t].split("=");if(o[0]==e)return decodeURI(o[1])}return!1}("q"))&&$("#search_input").val(e),$("#search_input").trigger("keyup"),$("#search_input").focus(),$(".search-card").submit(r),$(".icon-search").click(r),$(".icon-search").css("cursor","pointer")):$(document).click(function(e){"search_input"!==e.target.id&&"search_result"!==e.target.className&&"search_item"!==e.target.className&&($(".icon-search").css("color","#CAD3DC"),a.hide())})}function g(e){$("body").addClass("no-transition"),e.matches?$("body").addClass("night-mode"):$("body").removeClass("night-mode"),setTimeout(()=>{$("body").removeClass("no-transition")},100)}$("#page-link-container").html(h),u.prototype.autoComplete=function(){var r=this.value.toLowerCase();r.length?$(".icon-search").css("color","#3199DB"):$(".icon-search").css("color","#CAD3DC"),$(".search-card").is("form")&&history.replaceState("","",location.pathname+"?q="+r),$.getJSON("../../search.json").done(function(e){var a,t="";for(a in e){var o=e[a],s=o.title,n=o.tags;o.url;""!==r&&0<=(s+n).toLowerCase().indexOf(r)&&(t+='<a class="search_item" href="'+o.url+'">'+o.title+"</a>")}$(".search_result").html(t)})},new u,(m=window.matchMedia("(prefers-color-scheme: dark)")).addEventListener("change",g),g(m);var m=$("#copyright").html(),f=($("#copyright").html($("#copyright").html().replaceAll("<br>","\n")),"\n\n"+$("#copyright").text()+"原文：");$("#copyright").html(m),$(".post-content").on("mouseup",function(e){var a,t=window.getSelection();30<=t.toString().length&&(a=t,a+=f+location.href,$(".post-content").on("copy",function(e){(window.clipboardData||e.originalEvent.clipboardData).setData("text/plain",a),e.preventDefault()}))})});